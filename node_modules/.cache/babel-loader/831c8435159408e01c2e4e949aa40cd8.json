{"ast":null,"code":"// log\nimport store from \"../store\";\n\nconst fetchDataRequest = () => {\n  return {\n    type: \"CHECK_DATA_REQUEST\"\n  };\n};\n\nconst fetchDataSuccess = payload => {\n  return {\n    type: \"CHECK_DATA_SUCCESS\",\n    payload: payload\n  };\n};\n\nconst fetchDataFailed = payload => {\n  return {\n    type: \"CHECK_DATA_FAILED\",\n    payload: payload\n  };\n};\n\nexport let hasApproved;\nexport const fetchDataM = () => {\n  // let approved; \n  return async dispatch => {\n    const configResponse = await fetch(\"/stakeConfig/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const CONFIG = await configResponse.json();\n    dispatch(fetchDataRequest());\n\n    try {\n      let isApproved = await store.getState().blockchain.smartContract.methods.isApprovedForAll(store.getState().blockchain.account, CONFIG.CONTRACT_ADDRESS).call().then(response => {\n        hasApproved = response;\n      });\n      dispatch(fetchDataSuccess({\n        isApproved\n      }));\n    } catch (err) {\n      // console.log(err);\n      dispatch(fetchDataFailed(\"Could not load data from contract.\"));\n    }\n  };\n};","map":{"version":3,"sources":["/Users/kudiuser/Desktop/staking/src/redux/data/dataActions2.js"],"names":["store","fetchDataRequest","type","fetchDataSuccess","payload","fetchDataFailed","hasApproved","fetchDataM","dispatch","configResponse","fetch","headers","Accept","CONFIG","json","isApproved","getState","blockchain","smartContract","methods","isApprovedForAll","account","CONTRACT_ADDRESS","call","then","response","err"],"mappings":"AAAA;AACA,OAAOA,KAAP,MAAkB,UAAlB;;AAEA,MAAMC,gBAAgB,GAAG,MAAM;AAC7B,SAAO;AACLC,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJD;;AAMA,MAAMC,gBAAgB,GAAIC,OAAD,IAAa;AACpC,SAAO;AACLF,IAAAA,IAAI,EAAE,oBADD;AAELE,IAAAA,OAAO,EAAEA;AAFJ,GAAP;AAID,CALD;;AAOA,MAAMC,eAAe,GAAID,OAAD,IAAa;AACnC,SAAO;AACLF,IAAAA,IAAI,EAAE,mBADD;AAELE,IAAAA,OAAO,EAAEA;AAFJ,GAAP;AAID,CALD;;AAMA,OAAO,IAAIE,WAAJ;AACP,OAAO,MAAMC,UAAU,GAAG,MAAM;AAE9B;AACA,SAAO,MAAOC,QAAP,IAAoB;AACzB,UAAMC,cAAc,GAAG,MAAMC,KAAK,CAAC,0BAAD,EAA6B;AAC7DC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,MAAM,EAAE;AAFD;AADoD,KAA7B,CAAlC;AAMA,UAAMC,MAAM,GAAG,MAAMJ,cAAc,CAACK,IAAf,EAArB;AACAN,IAAAA,QAAQ,CAACP,gBAAgB,EAAjB,CAAR;;AACA,QAAI;AACF,UAAIc,UAAU,GAAG,MAAMf,KAAK,CACzBgB,QADoB,GAEpBC,UAFoB,CAETC,aAFS,CAEKC,OAFL,CAEaC,gBAFb,CAE8BpB,KAAK,CAACgB,QAAN,GAAiBC,UAAjB,CAA4BI,OAF1D,EAEmER,MAAM,CAACS,gBAF1E,EAGpBC,IAHoB,GAIpBC,IAJoB,CAIdC,QAAD,IAAc;AAClBnB,QAAAA,WAAW,GAAGmB,QAAd;AACD,OANoB,CAAvB;AAOAjB,MAAAA,QAAQ,CACNL,gBAAgB,CAAC;AACfY,QAAAA;AADe,OAAD,CADV,CAAR;AAKD,KAbD,CAaE,OAAOW,GAAP,EAAY;AACZ;AACAlB,MAAAA,QAAQ,CAACH,eAAe,CAAC,oCAAD,CAAhB,CAAR;AACD;AACF,GA1BD;AA2BD,CA9BM","sourcesContent":["// log\nimport store from \"../store\";\n\nconst fetchDataRequest = () => {\n  return {\n    type: \"CHECK_DATA_REQUEST\",\n  };\n};\n\nconst fetchDataSuccess = (payload) => {\n  return {\n    type: \"CHECK_DATA_SUCCESS\",\n    payload: payload,\n  };\n};\n\nconst fetchDataFailed = (payload) => {\n  return {\n    type: \"CHECK_DATA_FAILED\",\n    payload: payload,\n  };\n};\nexport let hasApproved; \nexport const fetchDataM = () => {\n\n  // let approved; \n  return async (dispatch) => {\n    const configResponse = await fetch(\"/stakeConfig/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const CONFIG = await configResponse.json();\n    dispatch(fetchDataRequest());\n    try {\n      let isApproved = await store\n        .getState()\n        .blockchain.smartContract.methods.isApprovedForAll(store.getState().blockchain.account, CONFIG.CONTRACT_ADDRESS)\n        .call()\n        .then((response) => {\n          hasApproved = response;\n        })\n      dispatch(\n        fetchDataSuccess({\n          isApproved\n        })\n      );\n    } catch (err) {\n      // console.log(err);\n      dispatch(fetchDataFailed(\"Could not load data from contract.\"));\n    }\n  };\n};"]},"metadata":{},"sourceType":"module"}